<div
  class="px-4 md:px-28 mt-8 mb-4 grid grid gap-12"
  *ngIf="isLoaded && petInfo"
>
  <nz-breadcrumb>
    <nz-breadcrumb-item>Adopt</nz-breadcrumb-item>
    <nz-breadcrumb-item>
      <a (click)="routeToPage('pets')">Pets</a>
    </nz-breadcrumb-item>
    <nz-breadcrumb-item>{{ petInfo?.name }}</nz-breadcrumb-item>
  </nz-breadcrumb>

  <h1 class="text-xl font-bold text-center">Hi I'm {{ petInfo?.name }}</h1>

  <!-- Admin add pet photo -->
  <ng-container *ngIf="isAdmin">
    <div class="flex justify-end">
      <nz-upload
        [nzAction]="uploadLink"
        nzListType="picture"
        [nzBeforeUpload]="beforeUpload"
        [(nzFileList)]="fileList"
        nzAccept=".jpg, .png, .jpeg"
        [nzMultiple]="true"
      >
        <button nz-button class="ant-btn-orange my-2">
          <span nz-icon nzType="upload"></span>
          Upload Photos
        </button>
      </nz-upload>
    </div>
  </ng-container>

  <ng-container *ngIf="petInfo.images.length > 0">
    <nz-carousel nzAutoPlay [nzAutoPlaySpeed]="5000" class="block lg:hidden">
      <div nz-carousel-content *ngFor="let image of petInfo?.images">
        <img [src]="image" [alt]="'Pet Save - ' + petInfo?.name" />
      </div>
    </nz-carousel>

    <div class="hidden lg:block">
      <div class="grid grid-cols-5">
        <nz-carousel
          nzAutoPlay
          [nzAutoPlaySpeed]="5000"
          class="col-span-3 col-start-2"
        >
          <div nz-carousel-content *ngFor="let image of petInfo?.images">
            <img [src]="image" [alt]="'Pet Save - ' + petInfo?.name" />
          </div>
        </nz-carousel>
      </div>
    </div>
  </ng-container>

  <white-card>
    <div class="grid gap-4">
      <div class="flex justify-end" *ngIf="isAdmin">
        <div>
          <button
            nz-button
            class="ant-btn-orange my-2"
            (click)="routeToPage('editPet')"
          >
            Edit
          </button>
        </div>

        <div>
          <button
            nz-button
            class="ant-btn-orange m-2"
            (click)="deleteBtnClicked()"
          >
            Delete
          </button>
        </div>
      </div>
      <text-align [title]="'Name'" [content]="petInfo?.name"></text-align>
      <text-align
        [title]="'Sex'"
        [content]="getPetGender(petInfo.gender)"
      ></text-align>
      <text-align
        [title]="'Age'"
        [content]="petAge + ' (Born on ' + petInfo.dateOfBirth + ')'"
        *ngIf="petAge"
      ></text-align>
      <text-align
        [title]="'Breed'"
        [content]="petInfo.breed"
        *ngIf="petInfo.breed"
      ></text-align>
      <text-align
        [title]="'Weight'"
        [content]="petInfo.weight + ' pound(s)'"
        *ngIf="petInfo.weight && petInfo.weight > 0"
      ></text-align>
      <text-align
        [title]="'Characteristics'"
        [content]="petInfo.characteristics"
        *ngIf="petInfo.characteristics"
      ></text-align>
      <text-align [title]="'Color'" [content]="petInfo.color"></text-align>
      <text-align
        [title]="'Health status'"
        [content]="petInfo.healthStatus"
        *ngIf="petInfo.healthStatus"
      ></text-align>
      <text-align
        [title]="'House Trained'"
        [content]="petInfo.houseTrained ? 'Yes' : 'No'"
        *ngIf="petInfo.houseTrained"
      ></text-align>
      <text-align
        [title]="'Personality'"
        [content]="petInfo.personality"
        *ngIf="petInfo.personality"
      ></text-align>
      <text-align
        [title]="'Ideal Family'"
        [content]="petInfo.idealFamily"
        *ngIf="petInfo.idealFamily"
      ></text-align>

      <nz-divider></nz-divider>

      <div
        *ngIf="petInfo.description"
        [innerHTML]="petInfo.description"
        class="text-lg"
      ></div>
      <nz-divider></nz-divider>

      <div class="text-lg grid gap-4">
        <div class="font-bold">
          Only local (Great Toronto Area) adoption is accepted.
        </div>
        <div>
          If youâ€™re interested in adopting this pet, please fill out this
          <span
            class="underline font-bold cursor-pointer"
            (click)="routeToPage('application-form')"
            >adoption form</span
          >
          to express your interest.
        </div>

        <div>
          Now We will reach back in
          <span class="font-bold">3-4 business days</span> for further
          instructions.
        </div>
      </div>
    </div>
  </white-card>

  <div class="flex justify-center flex-col md:flex-row">
    <button
      nz-button
      class="ant-btn-orange"
      nzSize="large"
      (click)="routeToPage('application-form')"
    >
      Adopt Me
    </button>

    <button
      nz-button
      class="ant-btn-orange my-4 md:my-0 md:mx-8"
      nzSize="large"
      (click)="routeToPage('donate')"
    >
      Donation
    </button>
  </div>
</div>

<!-- Pop up -->
<nz-modal [(nzVisible)]="showPopUpModal" [nzClosable]="false" [nzFooter]="null">
  <ng-container *nzModalContent>
    <div class="text-center">
      <div class="grid gap-4">
        <ng-container *ngIf="isUnauthorized">
          <div>Sorry you don't have the admin right.</div>
          <div>If you do, please try to login again</div>

          <div class="mx-auto">
            <button
              nz-button
              class="ant-btn-orange my-2"
              (click)="routeToPage('login')"
            >
              <span>Login</span>
            </button>
          </div>
        </ng-container>

        <ng-container *ngIf="isAdded">
          <div>The photo(s) uploaded successfully!</div>
        </ng-container>

        <ng-container *ngIf="deleteBox">
          Confirm delete?

          <div class="flex justify-center">
            <button
              nz-button
              class="ant-btn-orange m-2"
              (click)="closeDeleteBox(true)"
            >
              Confirm
            </button>

            <button
              nz-button
              class="ant-btn-orange m-2"
              (click)="closeDeleteBox(false)"
            >
              Cancel
            </button>
          </div>
        </ng-container>

        <ng-container *ngIf="successMsg">
          This pet has deleted successfully.
        </ng-container>
      </div>
    </div>
  </ng-container>
</nz-modal>
